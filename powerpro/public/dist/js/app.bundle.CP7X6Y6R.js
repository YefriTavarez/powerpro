(()=>{var m=Object.defineProperty;var f=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var g=(i,e,_)=>e in i?m(i,e,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[e]=_,h=(i,e)=>{for(var _ in e||(e={}))c.call(e,_)&&g(i,_,e[_]);if(f)for(var _ of f(e))y.call(e,_)&&g(i,_,e[_]);return i};frappe.provide("power.utils");function v(i,e){return Math.ceil(i/e)*e}function w(i,e){return Math.round(i/e)*e}function b(i,e){return e?v(i,1/8):w(i,1/8)}power.utils={round_to_nearest_eighth:b};frappe.provide("power.ui");frappe.provide("power.utils");var{round_to_nearest_eighth:p}=power.utils;power.ui.CreateMaterialSKU=function(i){var l,d,u,s;let e,_,n;fetch("/api/method/powerpro.controllers.assets.item_group.get_all_item_groups").then(t=>t.json()).then(({message:t})=>{_=t}),fetch(`/api/resource/Raw Material/${i}`).then(t=>t.json()).then(({data:t})=>{n=t,e.get_field("material_description").$wrapper.html(`
				<p class="text-muted">Material</p>
				<h3>${n.description}</h3>
			`)}),e=frappe.prompt([{fieldtype:"HTML",fieldname:"material_description",options:"Loading..."},{fieldtype:"Section Break",label:__("Material Specification")},{fieldname:"material_format",fieldtype:"Select",label:__("Material Format"),reqd:1,default:"Roll",options:["Roll","Sheet"],change(t){e.set_df_property("roll_width","reqd",t.target.value==="Roll"),e.set_df_property("roll_width","hidden",t.target.value==="Sheet"),e.set_df_property("sheet_width","reqd",t.target.value==="Sheet"),e.set_df_property("sheet_width","hidden",t.target.value==="Roll"),e.set_df_property("sheet_height","reqd",t.target.value==="Sheet"),e.set_df_property("sheet_height","hidden",t.target.value==="Roll")}},{fieldtype:"Column Break"},{fieldname:"roll_width",fieldtype:"Float",label:`${__("Roll Width")} (in)`,reqd:1,precision:3,async change(t){let{target:r}=t;await frappe.timeout(.1);let o=p(r.value);r.value!==o&&(r.value=o)}},{fieldname:"sheet_width",fieldtype:"Float",label:`${__("Sheet Width")} (in)`,hidden:1,precision:3,async change(t){let{target:r}=t;await frappe.timeout(.1);let o=p(r.value);r.value!==o&&(r.value=o)}},{fieldname:"sheet_height",fieldtype:"Float",label:`${__("Sheet Height")} (in)`,hidden:1,precision:3,async change(t){let{target:r}=t;await frappe.timeout(.1);let o=p(r.value);r.value!==o&&(r.value=o)}},{fieldtype:"Section Break",label:__("Weight")},{fieldname:"gsm",fieldtype:"Int",non_negative:1,reqd:1,label:__("GSM"),async change(t){let{target:r}=t;await frappe.timeout(.1),r.value||(r.value=0),r.value<0&&(r.value=0,frappe.show_alert({message:__("GSM cannot be negative!"),indicator:"red"}))}},{fieldtype:"Section Break",label:__("Item Group")},{fieldname:"item_group_1",fieldtype:"Link",label:__("Item Group 1"),options:"Item Group",default:(d=(l=frappe.boot)==null?void 0:l.powerpro_settings)==null?void 0:d.root_item_group_for_raw_materials,read_only:Boolean((s=(u=frappe.boot)==null?void 0:u.powerpro_settings)==null?void 0:s.root_item_group_for_raw_materials),reqd:1,change(t){}},{fieldname:"item_group_2",fieldtype:"Link",label:__("Item Group 2"),options:"Item Group",reqd:1,get_query(){return{filters:{parent_item_group:e.get_value("item_group_1")}}},change(t){let{value:r}=this;if(r){let o=_.find(a=>a.parent_item_group===r);e.set_df_property("item_group_3","hidden",!o),e.set_df_property("item_group_3","reqd",o)}else e.set_df_property("item_group_5","hidden",1),e.set_df_property("item_group_3","reqd",0);e.set_value("item_group_3",null)}},{fieldname:"item_group_3",fieldtype:"Link",label:__("Item Group 3"),options:"Item Group",hidden:1,get_query(){return{filters:{parent_item_group:e.get_value("item_group_2")}}},change(t){let{value:r}=this;if(r){let o=_.find(a=>a.parent_item_group===r);e.set_df_property("item_group_4","hidden",!o),e.set_df_property("item_group_4","reqd",o)}else e.set_df_property("item_group_4","hidden",1),e.set_df_property("item_group_4","reqd",0);e.set_value("item_group_4",null)}},{fieldname:"item_group_4",fieldtype:"Link",label:__("Item Group 4"),options:"Item Group",hidden:1,get_query(){return{filters:{parent_item_group:e.get_value("item_group_3")}}},change(t){let{value:r}=this;if(r){let o=_.find(a=>a.parent_item_group===r);e.set_df_property("item_group_5","hidden",!o),e.set_df_property("item_group_5","reqd",o)}else e.set_df_property("item_group_5","hidden",1),e.set_df_property("item_group_5","reqd",0);e.set_value("item_group_5",null)}},{fieldname:"item_group_5",fieldtype:"Link",label:__("Item Group 5"),options:"Item Group",hidden:1,get_query(){return{filters:{parent_item_group:e.get_value("item_group_4")}}},change(t){}}],function(t){frappe.call("powerpro.manufacturing_pro.doctype.raw_material.client.create_material_sku",h({material_id:i},t)).then(function(r){let{message:o}=r;o?(frappe.confirm(`
					${__("Here is the SKU")} <strong>${o}</strong>
					<button class="btn btn-info" onclick="frappe.utils.copy_to_clipboard('${o}')">
						${__("Copy to Clipboard")}
					</button>
					<br>${__("Do you want me to take you there?")}
				`,()=>{frappe.set_route("Form","Item",o)},()=>{frappe.show_alert({message:__("Alright... let's be productive, then!"),indicator:"green"})}),frappe.show_alert({message:o,indicator:"green"})):(frappe.show_alert({message:__("SKU not created!"),indicator:"red"}),frappe.confirm(__("Would you like to try again?"),()=>e.show(),()=>frappe.show_alert(__("Okay!"))))},function(r){frappe.show_alert({message:__("SKU not created!"),indicator:"red"}),frappe.confirm(__("Would you like to try again?"),()=>e.show(),()=>frappe.show_alert(__("Okay!")))})},__("Create a new SKU"),__("Please, do!"))};})();
//# sourceMappingURL=app.bundle.CP7X6Y6R.js.map
