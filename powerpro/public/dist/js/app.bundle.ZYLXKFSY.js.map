{
  "version": 3,
  "sources": ["../../../../../apps/powerpro/powerpro/public/js/controllers/functions.js", "../../../../../apps/powerpro/powerpro/public/js/vue/create_material_sku/index.js"],
  "sourcesContent": ["// Copyright (c) 2024, Yefri Tavarez and contributors\n// For license information, please see license.txt\n/* eslint-disable */\n\nfrappe.provide(\"power.utils\");\n\nfunction round_to_nearest_multiple(number, multiple) {\n\tconst value = flt(number, 3);\n\treturn Math.round(value / multiple) * multiple;\n}\n\nfunction round_to_nearest_eighth(number) {\n\treturn round_to_nearest_multiple(number, 1 / 8);\n}\n\nfunction round_to_nearest_sixteenth(number) {\n\treturn round_to_nearest_multiple(number, 1 / 16);\n}\n\npower.utils = {\n\tround_to_nearest_eighth,\n};\n", "// Copyright (c) 2024, Yefri Tavarez and contributors\n// For license information, please see license.txt\n/* eslint-disable */\n\nfrappe.provide(\"power.ui\");\nfrappe.provide(\"power.utils\");\n\nconst { round_to_nearest_eighth } = power.utils;\n\npower.ui.CreateMaterialSKU = function(docname) {\n\tlet dialog;\n\tdialog = frappe.prompt([\n\t\t{\n\t\t\tfieldtype: \"Section Break\",\n\t\t\tlabel: __(\"Material Specification\"),\n\t\t},\n\t\t{\n\t\t\tfieldname: \"material_format\",\n\t\t\tfieldtype: \"Select\",\n\t\t\tlabel: __(\"Material Format\"),\n\t\t\treqd: 1,\n\t\t\tdefault: \"Roll\",\n\t\t\toptions: [\n\t\t\t\t\"Roll\",\n\t\t\t\t\"Sheet\",\n\t\t\t],\n\t\t\tchange(event) {\n\t\t\t\tdialog.set_df_property(\"roll_width\", \"reqd\", event.target.value === \"Roll\");\n\t\t\t\tdialog.set_df_property(\"roll_width\", \"hidden\", event.target.value === \"Sheet\");\n\t\t\t\tdialog.set_df_property(\"sheet_width\", \"reqd\", event.target.value === \"Sheet\");\n\t\t\t\tdialog.set_df_property(\"sheet_width\", \"hidden\", event.target.value === \"Roll\");\n\t\t\t\tdialog.set_df_property(\"sheet_height\", \"reqd\", event.target.value === \"Sheet\");\n\t\t\t\tdialog.set_df_property(\"sheet_height\", \"hidden\", event.target.value === \"Roll\");\n\t\t\t}\n\t\t},\n\t\t{ fieldtype: \"Column Break\" },\n\t\t{\n\t\t\tfieldname: \"roll_width\",\n\t\t\tfieldtype: \"Float\",\n\t\t\tlabel: __(\"Roll Width\"),\n\t\t\treqd: 1,\n\t\t\tprecision: 3,\n\t\t\tasync change(event) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tawait frappe.timeout(.1);\n\n\t\t\t\tconst value = round_to_nearest_eighth(target.value);\n\t\t\t\tif (target.value !== value) {\n\t\t\t\t\ttarget.value = value;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfieldname: \"sheet_width\",\n\t\t\tfieldtype: \"Float\",\n\t\t\tlabel: __(\"Sheet Width\"),\n\t\t\thidden: 1,\n\t\t\tprecision: 3,\n\t\t\tasync change(event) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tawait frappe.timeout(.1);\n\n\t\t\t\tconst value = round_to_nearest_eighth(target.value);\n\t\t\t\tif (target.value !== value) {\n\t\t\t\t\ttarget.value = value;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfieldname: \"sheet_height\",\n\t\t\tfieldtype: \"Float\",\n\t\t\tlabel: __(\"Sheet Height\"),\n\t\t\thidden: 1,\n\t\t\tprecision: 3,\n\t\t\tasync change(event) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tawait frappe.timeout(.1);\n\n\t\t\t\tconst value = round_to_nearest_eighth(target.value);\n\t\t\t\tif (target.value !== value) {\n\t\t\t\t\ttarget.value = value;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfieldtype: \"Section Break\",\n\t\t\tlabel: __(\"Weight\"),\n\t\t},\n\t\t{\n\t\t\tfieldname: \"gsm\",\n\t\t\tfieldtype: \"Int\",\n\t\t\tnon_negative: 1,\n\t\t\treqd: 1,\n\t\t\tlabel: __(\"GSM\"),\n\t\t\tasync change(event) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tawait frappe.timeout(.1);\n\n\t\t\t\tif (!target.value) {\n\t\t\t\t\ttarget.value = 0;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\ttarget.value < 0\n\t\t\t\t) {\n\t\t\t\t\ttarget.value = 0;\n\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __(\"GSM cannot be negative!\"),\n\t\t\t\t\t\tindicator: \"red\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t], function(values) {\n\t\tfrappe.call(\"powerpro.manufacturing_pro.doctype.raw_material.client.create_material_sku\", {\n\t\t\tmaterial_id: docname,\n\t\t\t...values,\n\t\t}).then(function(response) {\n\t\t\tconst { message } = response;\n\n\t\t\tif (message) {\n\t\t\t\tfrappe.confirm(`\n\t\t\t\t\tHere is the SKU <strong>${message}</strong>\n\t\t\t\t\t<button class=\"btn btn-info\" onclick=\"frappe.utils.copy_to_clipboard('${message}')\">${__(\"Copy to Clipboard\")}</button>\n\t\t\t\t\t<br>${__(\"Do you want me to take you there?\")}\n\t\t\t\t`, () => {\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Item\", message);\n\t\t\t\t}, () => {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __(\"Alright... let's be productive, then!\"),\n\t\t\t\t\t\tindicator: \"green\",\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tmessage,\n\t\t\t\t\tindicator: \"green\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tmessage: __(\"SKU not created!\"),\n\t\t\t\t\tindicator: \"red\",\n\t\t\t\t});\n\n\t\t\t\tfrappe.confirm(\n\t\t\t\t\t__(\"Would you like to try again?\"),\n\t\t\t\t\t() => dialog.show(),\n\t\t\t\t\t() => frappe.show_alert(__(\"Okay!\")),\n\t\t\t\t);\n\t\t\t}\n\t\t}, function(exec) {\n\t\t\tfrappe.show_alert({\n\t\t\t\tmessage: __(\"SKU not created!\"),\n\t\t\t\tindicator: \"red\",\n\t\t\t});\n\n\t\t\tfrappe.confirm(\n\t\t\t\t__(\"Would you like to try again?\"),\n\t\t\t\t() => dialog.show(),\n\t\t\t\t() => frappe.show_alert(__(\"Okay!\")),\n\t\t\t);\n\t\t});\n\t}, __(\"Create a new SKU\"), __(\"Please, do!\"));\n}"],
  "mappings": "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",
  "names": ["round_to_nearest_multiple", "number", "multiple", "value", "round_to_nearest_eighth", "round_to_nearest_eighth", "round_to_nearest_eighth", "docname", "dialog", "event", "target", "value", "values", "__spreadValues", "response", "message", "exec"]
}
